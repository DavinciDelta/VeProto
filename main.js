import { ABI } from './abi'
const contract = '0x1d270c0c82c215e4b0ceae5b68a7daf4f049a7f8'

const connex = new Connex({
  node: 'https://vethor-node-test.vechaindev.com',
  network: 'test'
})

var userlogin = false
var loginbtn = document.querySelector('#login-btn')
var useraddress

loginbtn.onclick = async () => {

  const message = {
    purpose: "identification",
    payload: {
      type: "text",
      content: "Sign this a certificate to prove your identity",
    },
  }

  const certResponse = await connex.vendor.sign("cert", message).request()
  if (certResponse) {

    useraddress = certResponse.annex.signer
    document.querySelector('#login-body').className = 'hidden'
    document.querySelector('#dapp-body').classList.remove('hidden')
    document.querySelector('#user-address').innerHTML = useraddress
    userlogin = true
  }
  else {
      alert("Wallet not found");
  }

}

var setNamebtn = document.querySelector('#setName-btn');

setNamebtn.onclick = async () => {
    if (userlogin) {
        const tempName = document.querySelector('#setName-input').value
        if (tempName.length > 0) {
            const setNameABI = ABI.find(({ name }) => name === 'changeName');

            const clause = connex.thor.account(contract).method(setNameABI).asClause(tempName);
            const result = await connex.vendor.sign("tx", [clause]).comment("setting name").request();
            alert("transaction done: ", result.txid);

        }
        else {
            alert("Please put in a name");
        }
    }
    else {
        alert("User not logged in");
    }
}

var setEditorbtn = document.querySelector('#setEditor-btn');

setEditorbtn.onclick = async () => {
    if (userlogin) {
        const tempAddress = document.querySelector('#setEditor-input').value
        if (tempAddress.length > 0) {
            const setEditorABI = ABI.find(({ name }) => name === 'addAuthorizedAddress');

            const clause = connex.thor.account(contract).method(setEditorABI).asClause(tempAddress);
            const result = await connex.vendor.sign("tx", [clause]).comment("setting editor").request();
            alert("transaction done: ", result.txid);

        }
        else {
            alert("Please put in a address");
        }
    }
    else {
        alert("User not logged in");
    }
}

var writebtn = document.querySelector('#write-btn');

writebtn.onclick = async () => {
    if (userlogin) {
        const tempInfo = document.querySelector('#write-input').value
        const tempNumber = document.querySelector('#number-input').value
        if (tempInfo.length > 0) {
            if(tempNumber.length > 0){
                const writeABI = ABI.find(({ name }) => name === 'store');

                const clause = connex.thor.account(contract).method(writeABI).asClause(tempNumber, tempInfo);
                const result = await connex.vendor.sign("tx", [clause]).comment("writing info").request();
                alert("transaction done: ", result.txid);
            }
            else{
              alert("Enter the Paragraph number")
            }

        }
        else {
            alert("Write something into the paragraph");
        }
    }
    else {
        alert("User not logged in");
    }
}

var reloadbtn = document.querySelector('#reload-btn');

reloadbtn.onclick = async () => {
    const currentIndex = document.querySelector('#currentIndex');
    const currentProposal = document.querySelector('#currentProposal');
    const currentProposer = document.querySelector('#currentProposer');
    const yesVotes = document.querySelector('#yesVotes');
    const noVotes = document.querySelector('#noVotes');
    const requiredVotes = document.querySelector('#requiredVotes');
    const checkVoted = document.querySelector('#checkVoted');
    

    const indexABI = ABI.find(({ name }) => name === "getProposalIndex");
    const contentABI = ABI.find(({ name }) => name === "getProposal");
    const proposerABI = ABI.find(({ name }) => name === "getProposer");
    const yesABI = ABI.find(({ name }) => name === "getForVotes");
    const noABI = ABI.find(({ name }) => name === "getNoVotes");
    const requiredABI = ABI.find(({ name }) => name === "getRequiredVotes");
    const checkVotedABI = ABI.find(({ name }) => name === "hasVoted");
    currentIndex.innerHTML = 'reading';

    const result1 = await connex.thor.account(contract).method(indexABI).call();
    const result2 = await connex.thor.account(contract).method(contentABI).call();
    const result3 = await connex.thor.account(contract).method(proposerABI).call();
    const yesResult = await connex.thor.account(contract).method(yesABI).call();
    const noResult = await connex.thor.account(contract).method(noABI).call();
    const reqResult = await connex.thor.account(contract).method(requiredABI).call();
    const checkVoteResult = await connex.thor.account(contract).method(checkVotedABI).call(useraddress);

    if (result1) {
        currentIndex.innerHTML = result1.decoded[0];
    }
    else{
        currentIndex.innerHTML = "failed to get";
    }
    if(result2){
        currentProposal.innerHTML = result2.decoded[0];
    }
    else{
        currentProposal.innerHTML = "failed to get";
    }
    if (yesResult) {
        yesVotes.innerHTML = yesResult.decoded[0];
    }
    else{
        yesVotes.innerHTML = "failed to get";
    }
    if (noResult) {
        noVotes.innerHTML = noResult.decoded[0];
    }
    else{
        noVotes.innerHTML = "failed to get";
    }
    if (reqResult) {
        requiredVotes.innerHTML = reqResult.decoded[0];
    }
    else{
        requiredVotes.innerHTML = "failed to get";
    }
    if (checkVoteResult) {
        checkVoted.innerHTML = checkVoteResult.decoded[0];
    }
    else{
        checkVoted.innerHTML = "failed to get";
    }
    if(result3){
        currentProposer.innerHTML = result3.decoded[0];
    }
    else{
        currentProposer.innerHTML = "failed to get";
    }
    
  
    
}

var yesbtn = document.querySelector('#yes-btn');

yesbtn.onclick = async () => {
    const current = document.querySelector('#yesVotes');
    const voteYesABI = ABI.find(({ name }) => name === "voteFor");

    current.innerHTML = 'updating';

    const result = await connex.thor.account(contract).method(voteYesABI).call();

    if (result) {
      current.innerHTML = 'vote successful';
      const yesABI = ABI.find(({ name }) => name === "getForVotes");
      const yesResult = await connex.thor.account(contract).method(yesABI).call();
      if (yesResult) {
        current.innerHTML = yesResult.decoded[0];
      }
    }
    else {
      current.innerHTML = 'failed to get';
    }
}

var nobtn = document.querySelector('#no-btn');

nobtn.onclick = async () => {
    const current = document.querySelector('#noVotes');
    const voteNoABI = ABI.find(({ name }) => name === "voteNo");

    current.innerHTML = 'updating';

    const result = await connex.thor.account(contract).method(voteNoABI).call();

    if (result) {
      current.innerHTML = 'vote successful';
      const noABI = ABI.find(({ name }) => name === "getNoVotes");
      const noResult = await connex.thor.account(contract).method(noABI).call();
      if (noResult) {
          current.innerHTML = noResult.decoded[0];
      }
    }
    else {
      current.innerHTML = 'failed to get';
    }
}

var getNamebtn = document.querySelector('#getName-btn');

getNamebtn.onclick = async () => {
    const current = document.querySelector('#getName');
    const getNameABI = ABI.find(({ name }) => name === "getName");

    current.innerHTML = 'reading';

    const result = await connex.thor.account(contract).method(getNameABI).call();

    if (result) {
      current.innerHTML = result.decoded[0];
    }
    else {
      current.innerHTML = 'failed to get';
    }
}

var readbtn = document.querySelector('#read-btn');

readbtn.onclick = async () => {
    const current = document.querySelector('#read');
    const readABI = ABI.find(({ name }) => name === "retrieve");

    current.innerHTML = 'reading';

    const result = await connex.thor.account(contract).method(readABI).call(0);
    const result2 = await connex.thor.account(contract).method(readABI).call(1);
    if (result) {
        current.innerHTML = result.decoded[0];
        if(result2){
          current.innerHTML += "<br/>" + result2.decoded[0];
        }
    }
    else{
        current.innerHTML = "failed to get";
    }
    
}

var getEditorbtn = document.querySelector('#getEditor-btn');

getEditorbtn.onclick = async () => {
    const current = document.querySelector('#getEditor');
    const getEditorABI = ABI.find(({ name }) => name === "isAuthorized");

    current.innerHTML = 'reading';

    const result = await connex.thor.account(contract).method(getEditorABI).call(useraddress);

    if (result) {
      current.innerHTML = result.decoded[0];
    }
    else {
      current.innerHTML = 'he is not an editor';
    }
}

var createbtn = document.querySelector('#create-btn');

createbtn.onclick = async () => {
    if (userlogin) {
        const contractNum = document.querySelector('#contract-number');
        const contractByteCode = '0x608060405234801561001057600080fd5b5033601660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001806000601660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550610e8c806100da6000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c80637071293911610066578063707129391461010c5780638f88708b14610128578063c51a29e014610158578063e1ff178a14610176578063fe9fbb801461019257610093565b806306fdde031461009857806317d7de7c146100b657806342f1181e146100d45780635353a2d8146100f0575b600080fd5b6100a06101c2565b6040516100ad9190610713565b60405180910390f35b6100be610250565b6040516100cb9190610713565b60405180910390f35b6100ee60048036038101906100e991906107a7565b6102e2565b005b61010a60048036038101906101059190610909565b610384565b005b610126600480360381019061012191906107a7565b6103df565b005b610142600480360381019061013d9190610988565b61050e565b60405161014f9190610713565b60405180910390f35b6101606105b5565b60405161016d91906109c4565b60405180910390f35b610190600480360381019061018b91906109df565b6105be565b005b6101ac60048036038101906101a791906107a7565b61062d565b6040516101b99190610a56565b60405180910390f35b600080546101cf90610aa0565b80601f01602080910402602001604051908101604052809291908181526020018280546101fb90610aa0565b80156102485780601f1061021d57610100808354040283529160200191610248565b820191906000526020600020905b81548152906001019060200180831161022b57829003601f168201915b505050505081565b60606000805461025f90610aa0565b80601f016020809104026020016040519081016040528092919081815260200182805461028b90610aa0565b80156102d85780601f106102ad576101008083540402835291602001916102d8565b820191906000526020600020905b8154815290600101906020018083116102bb57829003601f168201915b5050505050905090565b6102eb3361062d565b61032a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161032190610b1d565b60405180910390fd5b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b61038d3361062d565b6103cc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103c390610b1d565b60405180910390fd5b80600090816103db9190610ce9565b5050565b6103e83361062d565b610427576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161041e90610b1d565b60405180910390fd5b600160008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff166104b3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104aa90610e07565b60405180910390fd5b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b60606002826014811061052457610523610e27565b5b01805461053090610aa0565b80601f016020809104026020016040519081016040528092919081815260200182805461055c90610aa0565b80156105a95780601f1061057e576101008083540402835291602001916105a9565b820191906000526020600020905b81548152906001019060200180831161058c57829003601f168201915b50505050509050919050565b60006001905090565b6105c73361062d565b610606576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105fd90610b1d565b60405180910390fd5b806002836014811061061b5761061a610e27565b5b0190816106289190610ce9565b505050565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff169050919050565b600081519050919050565b600082825260208201905092915050565b60005b838110156106bd5780820151818401526020810190506106a2565b60008484015250505050565b6000601f19601f8301169050919050565b60006106e582610683565b6106ef818561068e565b93506106ff81856020860161069f565b610708816106c9565b840191505092915050565b6000602082019050818103600083015261072d81846106da565b905092915050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061077482610749565b9050919050565b61078481610769565b811461078f57600080fd5b50565b6000813590506107a18161077b565b92915050565b6000602082840312156107bd576107bc61073f565b5b60006107cb84828501610792565b91505092915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b610816826106c9565b810181811067ffffffffffffffff82111715610835576108346107de565b5b80604052505050565b6000610848610735565b9050610854828261080d565b919050565b600067ffffffffffffffff821115610874576108736107de565b5b61087d826106c9565b9050602081019050919050565b82818337600083830152505050565b60006108ac6108a784610859565b61083e565b9050828152602081018484840111156108c8576108c76107d9565b5b6108d384828561088a565b509392505050565b600082601f8301126108f0576108ef6107d4565b5b8135610900848260208601610899565b91505092915050565b60006020828403121561091f5761091e61073f565b5b600082013567ffffffffffffffff81111561093d5761093c610744565b5b610949848285016108db565b91505092915050565b6000819050919050565b61096581610952565b811461097057600080fd5b50565b6000813590506109828161095c565b92915050565b60006020828403121561099e5761099d61073f565b5b60006109ac84828501610973565b91505092915050565b6109be81610952565b82525050565b60006020820190506109d960008301846109b5565b92915050565b600080604083850312156109f6576109f561073f565b5b6000610a0485828601610973565b925050602083013567ffffffffffffffff811115610a2557610a24610744565b5b610a31858286016108db565b9150509250929050565b60008115159050919050565b610a5081610a3b565b82525050565b6000602082019050610a6b6000830184610a47565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680610ab857607f821691505b602082108103610acb57610aca610a71565b5b50919050565b7f556e617574686f72697a65642061636365737300000000000000000000000000600082015250565b6000610b0760138361068e565b9150610b1282610ad1565b602082019050919050565b60006020820190508181036000830152610b3681610afa565b9050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302610b9f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610b62565b610ba98683610b62565b95508019841693508086168417925050509392505050565b6000819050919050565b6000610be6610be1610bdc84610952565b610bc1565b610952565b9050919050565b6000819050919050565b610c0083610bcb565b610c14610c0c82610bed565b848454610b6f565b825550505050565b600090565b610c29610c1c565b610c34818484610bf7565b505050565b5b81811015610c5857610c4d600082610c21565b600181019050610c3a565b5050565b601f821115610c9d57610c6e81610b3d565b610c7784610b52565b81016020851015610c86578190505b610c9a610c9285610b52565b830182610c39565b50505b505050565b600082821c905092915050565b6000610cc060001984600802610ca2565b1980831691505092915050565b6000610cd98383610caf565b9150826002028217905092915050565b610cf282610683565b67ffffffffffffffff811115610d0b57610d0a6107de565b5b610d158254610aa0565b610d20828285610c5c565b600060209050601f831160018114610d535760008415610d41578287015190505b610d4b8582610ccd565b865550610db3565b601f198416610d6186610b3d565b60005b82811015610d8957848901518255600182019150602085019450602081019050610d64565b86831015610da65784890151610da2601f891682610caf565b8355505b6001600288020188555050505b505050505050565b7f77616c6c65742061646472657373206973206e6f7420616e20656469746f7200600082015250565b6000610df1601f8361068e565b9150610dfc82610dbb565b602082019050919050565b60006020820190508181036000830152610e2081610de4565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fdfea26469706673582212204da9b7b5e3a2ea120e01330f32e33d9ddd74c818bd8b57f2377e5a901013072764736f6c63430008120033'
        const contractByteCode2 = '0x608060405260008060006101000a81548160ff02191690831515021790555060646001556000600b553480156200003557600080fd5b5033602060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600160096000602060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550600a339080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600b6000828254620001699190620001af565b92505081905550620001ea565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000620001bc8262000176565b9150620001c98362000176565b9250828201905080821115620001e457620001e362000180565b5b92915050565b611a7a80620001fa6000396000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c80637b788b7f116100a2578063e1ff178a11610071578063e1ff178a146102ab578063e5920ab5146102c7578063e9790d02146102e5578063fe9fbb8014610303578063ffaa36081461033357610116565b80637b788b7f146102215780638f88708b1461023f578063b9e2bea01461026f578063c51a29e01461028d57610116565b806341c12a70116100e957806341c12a70146101a557806342f1181e146101af5780635353a2d8146101cb57806370712939146101e7578063776618291461020357610116565b806306fdde031461011b57806309eef43e1461013957806317d7de7c146101695780633605b63e14610187575b600080fd5b61012361033d565b6040516101309190611013565b60405180910390f35b610153600480360381019061014e91906110a7565b6103cb565b60405161016091906110ef565b60405180910390f35b610171610421565b60405161017e9190611013565b60405180910390f35b61018f6104b3565b60405161019c9190611123565b60405180910390f35b6101ad6104bd565b005b6101c960048036038101906101c491906110a7565b610653565b005b6101e560048036038101906101e09190611273565b610798565b005b61020160048036038101906101fc91906110a7565b6107f3565b005b61020b610933565b6040516102189190611123565b60405180910390f35b61022961093d565b6040516102369190611123565b60405180910390f35b610259600480360381019061025491906112e8565b610947565b6040516102669190611013565b60405180910390f35b6102776109ee565b6040516102849190611013565b60405180910390f35b610295610a80565b6040516102a29190611123565b60405180910390f35b6102c560048036038101906102c09190611315565b610a89565b005b6102cf610beb565b6040516102dc9190611123565b60405180910390f35b6102ed610bf5565b6040516102fa9190611380565b60405180910390f35b61031d600480360381019061031891906110a7565b610c1f565b60405161032a91906110ef565b60405180910390f35b61033b610c75565b005b6008805461034a906113ca565b80601f0160208091040260200160405190810160405280929190818152602001828054610376906113ca565b80156103c35780601f10610398576101008083540402835291602001916103c3565b820191906000526020600020905b8154815290600101906020018083116103a657829003601f168201915b505050505081565b6000600760008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff169050919050565b606060088054610430906113ca565b80601f016020809104026020016040519081016040528092919081815260200182805461045c906113ca565b80156104a95780601f1061047e576101008083540402835291602001916104a9565b820191906000526020600020905b81548152906001019060200180831161048c57829003601f168201915b5050505050905090565b6000600554905090565b6104c633610c1f565b610505576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104fc90611447565b60405180910390fd5b60646001540361054a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610541906114b3565b60405180910390fd5b600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16156105d7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105ce9061151f565b60405180910390fd5b6001600660008282546105ea919061156e565b925050819055506001600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550610651610e0b565b565b61065c33610c1f565b61069b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161069290611447565b60405180910390fd5b6001600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550600a819080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600b6000828254610769919061156e565b925050819055506064600154146107955760016004600082825461078d919061156e565b925050819055505b50565b6107a133610c1f565b6107e0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107d790611447565b60405180910390fd5b80600890816107ef919061174e565b5050565b6107fc33610c1f565b61083b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161083290611447565b60405180910390fd5b6000600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055506001600b60008282546108a69190611820565b92505081905550606460015414158015610910575060001515600760008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515145b15610930576001600460008282546109289190611820565b925050819055505b50565b6000600154905090565b6000600454905090565b6060600c826014811061095d5761095c611854565b5b018054610969906113ca565b80601f0160208091040260200160405190810160405280929190818152602001828054610995906113ca565b80156109e25780601f106109b7576101008083540402835291602001916109e2565b820191906000526020600020905b8154815290600101906020018083116109c557829003601f168201915b50505050509050919050565b6060600280546109fd906113ca565b80601f0160208091040260200160405190810160405280929190818152602001828054610a29906113ca565b8015610a765780601f10610a4b57610100808354040283529160200191610a76565b820191906000526020600020905b815481529060010190602001808311610a5957829003601f168201915b5050505050905090565b60006002905090565b610a9233610c1f565b610ad1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ac890611447565b60405180910390fd5b606460015414610b16576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b0d906118cf565b60405180910390fd5b816001819055508060029081610b2c919061174e565b5033600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600b5460048190555060016005819055506001600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055506000600681905550610be7610e0b565b5050565b6000600654905090565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff169050919050565b610c7e33610c1f565b610cbd576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cb490611447565b60405180910390fd5b606460015403610d02576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cf9906114b3565b60405180910390fd5b600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615610d8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d869061151f565b60405180910390fd5b600160056000828254610da2919061156e565b925050819055506001600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550610e09610e0b565b565b60006005549050600281610e1f91906118ef565b90506004548110610e7f576002600c60015460148110610e4257610e41611854565b5b019081610e4f919061195c565b506064600181905550610e60610ec6565b60016000806101000a81548160ff021916908315150217905550610ec3565b600454600654600554610e92919061156e565b03610ec2576064600181905550610ea7610ec6565b60008060006101000a81548160ff0219169083151502179055505b5b50565b60005b600a80549050811015610f8057600060076000600a8481548110610ef057610eef611854565b5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550600181610f79919061156e565b9050610ec9565b50565b600081519050919050565b600082825260208201905092915050565b60005b83811015610fbd578082015181840152602081019050610fa2565b60008484015250505050565b6000601f19601f8301169050919050565b6000610fe582610f83565b610fef8185610f8e565b9350610fff818560208601610f9f565b61100881610fc9565b840191505092915050565b6000602082019050818103600083015261102d8184610fda565b905092915050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061107482611049565b9050919050565b61108481611069565b811461108f57600080fd5b50565b6000813590506110a18161107b565b92915050565b6000602082840312156110bd576110bc61103f565b5b60006110cb84828501611092565b91505092915050565b60008115159050919050565b6110e9816110d4565b82525050565b600060208201905061110460008301846110e0565b92915050565b6000819050919050565b61111d8161110a565b82525050565b60006020820190506111386000830184611114565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b61118082610fc9565b810181811067ffffffffffffffff8211171561119f5761119e611148565b5b80604052505050565b60006111b2611035565b90506111be8282611177565b919050565b600067ffffffffffffffff8211156111de576111dd611148565b5b6111e782610fc9565b9050602081019050919050565b82818337600083830152505050565b6000611216611211846111c3565b6111a8565b90508281526020810184848401111561123257611231611143565b5b61123d8482856111f4565b509392505050565b600082601f83011261125a5761125961113e565b5b813561126a848260208601611203565b91505092915050565b6000602082840312156112895761128861103f565b5b600082013567ffffffffffffffff8111156112a7576112a6611044565b5b6112b384828501611245565b91505092915050565b6112c58161110a565b81146112d057600080fd5b50565b6000813590506112e2816112bc565b92915050565b6000602082840312156112fe576112fd61103f565b5b600061130c848285016112d3565b91505092915050565b6000806040838503121561132c5761132b61103f565b5b600061133a858286016112d3565b925050602083013567ffffffffffffffff81111561135b5761135a611044565b5b61136785828601611245565b9150509250929050565b61137a81611069565b82525050565b60006020820190506113956000830184611371565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806113e257607f821691505b6020821081036113f5576113f461139b565b5b50919050565b7f556e617574686f72697a65642061636365737300000000000000000000000000600082015250565b6000611431601383610f8e565b915061143c826113fb565b602082019050919050565b6000602082019050818103600083015261146081611424565b9050919050565b7f6e6f2070726f706f73616c7320617661696c61626c6500000000000000000000600082015250565b600061149d601683610f8e565b91506114a882611467565b602082019050919050565b600060208201905081810360008301526114cc81611490565b9050919050565b7f616c726561647920766f74656421000000000000000000000000000000000000600082015250565b6000611509600e83610f8e565b9150611514826114d3565b602082019050919050565b60006020820190508181036000830152611538816114fc565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006115798261110a565b91506115848361110a565b925082820190508082111561159c5761159b61153f565b5b92915050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026116047fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826115c7565b61160e86836115c7565b95508019841693508086168417925050509392505050565b6000819050919050565b600061164b6116466116418461110a565b611626565b61110a565b9050919050565b6000819050919050565b61166583611630565b61167961167182611652565b8484546115d4565b825550505050565b600090565b61168e611681565b61169981848461165c565b505050565b5b818110156116bd576116b2600082611686565b60018101905061169f565b5050565b601f821115611702576116d3816115a2565b6116dc846115b7565b810160208510156116eb578190505b6116ff6116f7856115b7565b83018261169e565b50505b505050565b600082821c905092915050565b600061172560001984600802611707565b1980831691505092915050565b600061173e8383611714565b9150826002028217905092915050565b61175782610f83565b67ffffffffffffffff8111156117705761176f611148565b5b61177a82546113ca565b6117858282856116c1565b600060209050601f8311600181146117b857600084156117a6578287015190505b6117b08582611732565b865550611818565b601f1984166117c6866115a2565b60005b828110156117ee578489015182556001820191506020850194506020810190506117c9565b8683101561180b5784890151611807601f891682611714565b8355505b6001600288020188555050505b505050505050565b600061182b8261110a565b91506118368361110a565b925082820390508181111561184e5761184d61153f565b5b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f70726f706f73616c7320617661696c61626c6500000000000000000000000000600082015250565b60006118b9601383610f8e565b91506118c482611883565b602082019050919050565b600060208201905081810360008301526118e8816118ac565b9050919050565b60006118fa8261110a565b91506119058361110a565b92508282026119138161110a565b9150828204841483151761192a5761192961153f565b5b5092915050565b600081549050611940816113ca565b9050919050565b60008190508160005260206000209050919050565b81810361196a575050611a42565b61197382611931565b67ffffffffffffffff81111561198c5761198b611148565b5b61199682546113ca565b6119a18282856116c1565b6000601f8311600181146119d057600084156119be578287015490505b6119c88582611732565b865550611a3b565b601f1984166119de87611947565b96506119e9866115a2565b60005b82811015611a11578489015482556001820191506001850194506020810190506119ec565b86831015611a2e5784890154611a2a601f891682611714565b8355505b6001600288020188555050505b5050505050505b56fea2646970667358221220566d39af79a400114845379dfa69fdc6d553bfff65a738d11d7739e42c3d853e64736f6c63430008120033'
        const contractByteCode3 = '0x608060405260008060006101000a81548160ff02191690831515021790555060646001556000600b553480156200003557600080fd5b5033602060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600160096000602060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550600a339080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600b6000828254620001699190620001af565b92505081905550620001ea565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000620001bc8262000176565b9150620001c98362000176565b9250828201905080821115620001e457620001e362000180565b5b92915050565b611a1680620001fa6000396000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c80637b788b7f116100a2578063e1ff178a11610071578063e1ff178a146102ab578063e5920ab5146102c7578063e9790d02146102e5578063fe9fbb8014610303578063ffaa36081461033357610116565b80637b788b7f146102215780638f88708b1461023f578063b9e2bea01461026f578063c51a29e01461028d57610116565b806341c12a70116100e957806341c12a70146101a557806342f1181e146101af5780635353a2d8146101cb57806370712939146101e7578063776618291461020357610116565b806306fdde031461011b57806309eef43e1461013957806317d7de7c146101695780633605b63e14610187575b600080fd5b61012361033d565b6040516101309190610ff1565b60405180910390f35b610153600480360381019061014e9190611085565b6103cb565b60405161016091906110cd565b60405180910390f35b610171610421565b60405161017e9190610ff1565b60405180910390f35b61018f6104b3565b60405161019c9190611101565b60405180910390f35b6101ad6104bd565b005b6101c960048036038101906101c49190611085565b610653565b005b6101e560048036038101906101e09190611251565b610798565b005b61020160048036038101906101fc9190611085565b6107f3565b005b61020b610933565b6040516102189190611101565b60405180910390f35b61022961093d565b6040516102369190611101565b60405180910390f35b610259600480360381019061025491906112c6565b610947565b6040516102669190610ff1565b60405180910390f35b6102776109ee565b6040516102849190610ff1565b60405180910390f35b610295610a80565b6040516102a29190611101565b60405180910390f35b6102c560048036038101906102c091906112f3565b610a89565b005b6102cf610beb565b6040516102dc9190611101565b60405180910390f35b6102ed610bf5565b6040516102fa919061135e565b60405180910390f35b61031d60048036038101906103189190611085565b610c1f565b60405161032a91906110cd565b60405180910390f35b61033b610c75565b005b6008805461034a906113a8565b80601f0160208091040260200160405190810160405280929190818152602001828054610376906113a8565b80156103c35780601f10610398576101008083540402835291602001916103c3565b820191906000526020600020905b8154815290600101906020018083116103a657829003601f168201915b505050505081565b6000600760008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff169050919050565b606060088054610430906113a8565b80601f016020809104026020016040519081016040528092919081815260200182805461045c906113a8565b80156104a95780601f1061047e576101008083540402835291602001916104a9565b820191906000526020600020905b81548152906001019060200180831161048c57829003601f168201915b5050505050905090565b6000600554905090565b6104c633610c1f565b610505576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104fc90611425565b60405180910390fd5b60646001540361054a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161054190611491565b60405180910390fd5b600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16156105d7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105ce906114fd565b60405180910390fd5b6001600660008282546105ea919061154c565b925050819055506001600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550610651610e0b565b565b61065c33610c1f565b61069b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161069290611425565b60405180910390fd5b6001600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550600a819080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600b6000828254610769919061154c565b925050819055506064600154146107955760016004600082825461078d919061154c565b925050819055505b50565b6107a133610c1f565b6107e0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107d790611425565b60405180910390fd5b80600890816107ef919061172c565b5050565b6107fc33610c1f565b61083b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161083290611425565b60405180910390fd5b6000600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055506001600b60008282546108a691906117fe565b92505081905550606460015414158015610910575060001515600760008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515145b156109305760016004600082825461092891906117fe565b925050819055505b50565b6000600154905090565b6000600454905090565b6060600c826014811061095d5761095c611832565b5b018054610969906113a8565b80601f0160208091040260200160405190810160405280929190818152602001828054610995906113a8565b80156109e25780601f106109b7576101008083540402835291602001916109e2565b820191906000526020600020905b8154815290600101906020018083116109c557829003601f168201915b50505050509050919050565b6060600280546109fd906113a8565b80601f0160208091040260200160405190810160405280929190818152602001828054610a29906113a8565b8015610a765780601f10610a4b57610100808354040283529160200191610a76565b820191906000526020600020905b815481529060010190602001808311610a5957829003601f168201915b5050505050905090565b60006003905090565b610a9233610c1f565b610ad1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ac890611425565b60405180910390fd5b606460015414610b16576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b0d906118ad565b60405180910390fd5b816001819055508060029081610b2c919061172c565b5033600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600b5460048190555060016005819055506001600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055506000600681905550610be7610e0b565b5050565b6000600654905090565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff169050919050565b610c7e33610c1f565b610cbd576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cb490611425565b60405180910390fd5b606460015403610d02576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cf990611491565b60405180910390fd5b600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff1615610d8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d86906114fd565b60405180910390fd5b600160056000828254610da2919061154c565b925050819055506001600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550610e09610e0b565b565b60045460055403610e6b576002600c60015460148110610e2e57610e2d611832565b5b019081610e3b91906118f8565b506064600181905550610e4c610ea4565b60016000806101000a81548160ff021916908315150217905550610ea2565b60006006541115610ea1576064600181905550610e86610ea4565b60008060006101000a81548160ff0219169083151502179055505b5b565b60005b600a80549050811015610f5e57600060076000600a8481548110610ece57610ecd611832565b5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550600181610f57919061154c565b9050610ea7565b50565b600081519050919050565b600082825260208201905092915050565b60005b83811015610f9b578082015181840152602081019050610f80565b60008484015250505050565b6000601f19601f8301169050919050565b6000610fc382610f61565b610fcd8185610f6c565b9350610fdd818560208601610f7d565b610fe681610fa7565b840191505092915050565b6000602082019050818103600083015261100b8184610fb8565b905092915050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061105282611027565b9050919050565b61106281611047565b811461106d57600080fd5b50565b60008135905061107f81611059565b92915050565b60006020828403121561109b5761109a61101d565b5b60006110a984828501611070565b91505092915050565b60008115159050919050565b6110c7816110b2565b82525050565b60006020820190506110e260008301846110be565b92915050565b6000819050919050565b6110fb816110e8565b82525050565b600060208201905061111660008301846110f2565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b61115e82610fa7565b810181811067ffffffffffffffff8211171561117d5761117c611126565b5b80604052505050565b6000611190611013565b905061119c8282611155565b919050565b600067ffffffffffffffff8211156111bc576111bb611126565b5b6111c582610fa7565b9050602081019050919050565b82818337600083830152505050565b60006111f46111ef846111a1565b611186565b9050828152602081018484840111156112105761120f611121565b5b61121b8482856111d2565b509392505050565b600082601f8301126112385761123761111c565b5b81356112488482602086016111e1565b91505092915050565b6000602082840312156112675761126661101d565b5b600082013567ffffffffffffffff81111561128557611284611022565b5b61129184828501611223565b91505092915050565b6112a3816110e8565b81146112ae57600080fd5b50565b6000813590506112c08161129a565b92915050565b6000602082840312156112dc576112db61101d565b5b60006112ea848285016112b1565b91505092915050565b6000806040838503121561130a5761130961101d565b5b6000611318858286016112b1565b925050602083013567ffffffffffffffff81111561133957611338611022565b5b61134585828601611223565b9150509250929050565b61135881611047565b82525050565b6000602082019050611373600083018461134f565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806113c057607f821691505b6020821081036113d3576113d2611379565b5b50919050565b7f556e617574686f72697a65642061636365737300000000000000000000000000600082015250565b600061140f601383610f6c565b915061141a826113d9565b602082019050919050565b6000602082019050818103600083015261143e81611402565b9050919050565b7f6e6f2070726f706f73616c7320617661696c61626c6500000000000000000000600082015250565b600061147b601683610f6c565b915061148682611445565b602082019050919050565b600060208201905081810360008301526114aa8161146e565b9050919050565b7f616c726561647920766f74656421000000000000000000000000000000000000600082015250565b60006114e7600e83610f6c565b91506114f2826114b1565b602082019050919050565b60006020820190508181036000830152611516816114da565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611557826110e8565b9150611562836110e8565b925082820190508082111561157a5761157961151d565b5b92915050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026115e27fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826115a5565b6115ec86836115a5565b95508019841693508086168417925050509392505050565b6000819050919050565b600061162961162461161f846110e8565b611604565b6110e8565b9050919050565b6000819050919050565b6116438361160e565b61165761164f82611630565b8484546115b2565b825550505050565b600090565b61166c61165f565b61167781848461163a565b505050565b5b8181101561169b57611690600082611664565b60018101905061167d565b5050565b601f8211156116e0576116b181611580565b6116ba84611595565b810160208510156116c9578190505b6116dd6116d585611595565b83018261167c565b50505b505050565b600082821c905092915050565b6000611703600019846008026116e5565b1980831691505092915050565b600061171c83836116f2565b9150826002028217905092915050565b61173582610f61565b67ffffffffffffffff81111561174e5761174d611126565b5b61175882546113a8565b61176382828561169f565b600060209050601f8311600181146117965760008415611784578287015190505b61178e8582611710565b8655506117f6565b601f1984166117a486611580565b60005b828110156117cc578489015182556001820191506020850194506020810190506117a7565b868310156117e957848901516117e5601f8916826116f2565b8355505b6001600288020188555050505b505050505050565b6000611809826110e8565b9150611814836110e8565b925082820390508181111561182c5761182b61151d565b5b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f70726f706f73616c7320617661696c61626c6500000000000000000000000000600082015250565b6000611897601383610f6c565b91506118a282611861565b602082019050919050565b600060208201905081810360008301526118c68161188a565b9050919050565b6000815490506118dc816113a8565b9050919050565b60008190508160005260206000209050919050565b8181036119065750506119de565b61190f826118cd565b67ffffffffffffffff81111561192857611927611126565b5b61193282546113a8565b61193d82828561169f565b6000601f83116001811461196c576000841561195a578287015490505b6119648582611710565b8655506119d7565b601f19841661197a876118e3565b965061198586611580565b60005b828110156119ad57848901548255600182019150600185019450602081019050611988565b868310156119ca57848901546119c6601f8916826116f2565b8355505b6001600288020188555050505b5050505050505b56fea2646970667358221220cb4947d35fee903be6e8b50bc65ea719adf774a28ccc6834c8cc5e3e7eac15a864736f6c63430008120033'
        contractNum.innerHTML = 'processing'
        const resp = await connex.vendor
            .sign('tx', [{ value: 0, data: contractByteCode, to: null }])
            .comment('Deploy contract')
            .request()
        if(resp){
          contractNum.innerHTML = resp.txid;
        }
        else{
          contractNum.innerHTML = 'failed to get';
        }
    }
    else {
        alert("User not logged in");
    }
}